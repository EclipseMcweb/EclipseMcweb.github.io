<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>MediaMC Checkout</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:'Segoe UI',Arial,sans-serif;background:linear-gradient(135deg,#0ea5e9,#1e3a8a);color:#fff}
header{text-align:center;padding:40px 20px;background:rgba(2,6,23,.9)}
h1{color:#38bdf8;margin:0}
section{max-width:700px;margin:40px auto;background:rgba(30,64,175,0.85);padding:20px;border-radius:12px;border:2px solid #38bdf8}
.productItem{background:rgba(2,6,23,.8);padding:10px;border-radius:6px;margin:5px 0;display:flex;justify-content:space-between}
</style>
</head>
<body>

<header>
<h1>ðŸ’³ Checkout MediaMC</h1>
<p>Completa il tuo ordine</p>
</header>

<section id="checkoutSection">
  <h2>Riepilogo Ordine</h2>
  <p><strong>ID Ordine:</strong> <span id="oid"></span></p>
  <p><strong>Nick:</strong> <span id="nick"></span></p>
  <p><strong>Totale:</strong> â‚¬<span id="total">0</span></p>

  <hr>
  <h2>Bonifico Bancario</h2>
  <p><strong>Intestatario:</strong> MediaMC Network</p>
  <p><strong>IBAN:</strong> <span style="color:#facc15">IT59E0200832974001869280392</span></p>
  <p><strong>Causale:</strong> <span id="oid2"></span></p>
  <p style="color:#a5f3fc;margin-top:15px">Effettua il bonifico e invia conferma allo staff aprendo un ticket sul nostro Discord.</p>
</section>

<section>
  <h2>Prodotti Ordinati</h2>
  <div id="items"></div>
</section>

<script>
const nick = sessionStorage.getItem('nick');
if(!nick) {
  alert('Inserisci il nick prima di procedere!');
  window.location.href='store.html';
}

const cart = JSON.parse(localStorage.getItem('cart_'+nick))||[];
if(cart.length===0){
  alert('Carrello vuoto!');
  window.location.href='cart.html';
}

// Genera ID ordine
const orderId = 'MM-'+Math.floor(Math.random()*1000000);
document.getElementById('oid').textContent = orderId;
document.getElementById('oid2').textContent = orderId;
document.getElementById('nick').textContent = nick;

// Calcola totale
let total = 0;
cart.forEach(p=>total+=p.price);
document.getElementById('total').textContent = total;

// Mostra prodotti
const itemsDiv=document.getElementById('items');
cart.forEach(p=>{
  const div=document.createElement('div');
  div.className='productItem';
  div.innerHTML=`<span>${p.name}</span><span>â‚¬${p.price}</span>`;
  itemsDiv.appendChild(div);
});

// Salva ordine nello storico per lo staff
let orders = JSON.parse(localStorage.getItem('checkoutDataList'))||[];
orders.push({id:orderId,nick:nick,cart:cart,total:total});
localStorage.setItem('checkoutDataList',JSON.stringify(orders));

// Svuota carrello dopo checkout
localStorage.removeItem('cart_'+nick);
</script>

</body>
</html>
