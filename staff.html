<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>MediaMC Staff Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  font-family:'Segoe UI',Arial;
  background:linear-gradient(135deg,#0ea5e9,#020617);
  color:#fff
}
header{
  text-align:center;
  padding:30px;
  background:rgba(2,6,23,.9)
}
section{
  max-width:900px;
  margin:25px auto;
  background:rgba(2,6,23,.85);
  border:2px solid #38bdf8;
  border-radius:12px;
  padding:20px
}
h2{margin-top:0;color:#38bdf8}
input,select,textarea{
  width:100%;
  padding:8px;
  margin:6px 0;
  border-radius:6px;
  border:none
}
button{
  padding:6px 10px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  margin:3px
}
.green{background:#22c55e;color:#fff}
.red{background:#ef4444;color:#fff}
.item{
  background:rgba(0,10,30,.7);
  padding:10px;
  margin:6px 0;
  border-radius:6px;
  display:flex;
  justify-content:space-between;
  align-items:center
}
.modalBg{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.75);
  justify-content:center;
  align-items:center;
  z-index:999
}
.modal{
  background:#020617;
  border:2px solid #38bdf8;
  border-radius:12px;
  padding:20px;
  max-width:400px;
  width:90%
}
</style>
</head>
<body>

<header>
<h1>‚öôÔ∏è MediaMC Staff Panel</h1>
</header>

<!-- LOGIN -->
<section id="login">
<h2>Login Staff</h2>
<input type="password" id="pass" placeholder="Password staff">
<button class="green" onclick="login()">Accedi</button>
</section>

<!-- CONTENT -->
<div id="panel" style="display:none">

<section>
<h2>üîé Ordini</h2>
<input id="search" placeholder="Cerca ID ordine">
<div id="orders"></div>
</section>

<section>
<h2>üóÇÔ∏è Categorie</h2>
<input id="catName" placeholder="Nome categoria">
<button class="green" onclick="addCat()">Crea</button>
<div id="cats"></div>
</section>

<section>
<h2>üõí Prodotti</h2>
<input id="pName" placeholder="Nome prodotto">
<select id="pCat"></select>
<input id="pPrice" type="number" placeholder="Prezzo">
<textarea id="pDesc" placeholder="Descrizione"></textarea>
<button class="green" onclick="addProd()">Crea prodotto</button>
<div id="prods"></div>
</section>

<section>
<h2>üéÅ GiftCard</h2>
<input id="gVal" type="number" placeholder="Valore ‚Ç¨">
<button class="green" onclick="addGift()">Crea Gift</button>
<div id="gifts"></div>
</section>

</div>

<script>
function login(){
  if(document.getElementById('pass').value==='staff123'){
    document.getElementById('login').style.display='none';
    document.getElementById('panel').style.display='block';
    renderAll();
  }else alert("Password errata");
}

/* ORDINI */
let orders=JSON.parse(localStorage.getItem('checkoutDataList'))||[];
function renderOrders(list=orders){
  const o=document.getElementById('orders');
  o.innerHTML='';
  list.forEach((x,i)=>{
    o.innerHTML+=`
    <div class="item">
      <div>
        <b>${x.id}</b><br>
        Nick: ${x.nick}<br>
        Totale: ‚Ç¨${x.total}
      </div>
      <button class="red" onclick="delOrder(${i})">Elimina</button>
    </div>`;
  });
}
function delOrder(i){
  if(!confirm("Eliminare ordine?"))return;
  orders.splice(i,1);
  localStorage.setItem('checkoutDataList',JSON.stringify(orders));
  renderOrders();
}
document.getElementById('search').oninput=e=>{
  const v=e.target.value.trim();
  renderOrders(v?orders.filter(x=>x.id.includes(v)):orders);
};

/* CATEGORIE */
let cats=JSON.parse(localStorage.getItem('categories'))||[];
function addCat(){
  const n=catName.value.trim();
  if(!n)return;
  cats.push(n);
  localStorage.setItem('categories',JSON.stringify(cats));
  renderCats();
}
function renderCats(){
  catsDiv.innerHTML='';
  cats.forEach((c,i)=>{
    catsDiv.innerHTML+=`
    <div class="item">
      ${c}
      <button class="red" onclick="delCat(${i})">X</button>
    </div>`;
  });
}
function delCat(i){
  cats.splice(i,1);
  localStorage.setItem('categories',JSON.stringify(cats));
  renderCats();
}

/* PRODOTTI */
let prods=JSON.parse(localStorage.getItem('products'))||[];
function addProd(){
  const p={
    name:pName.value.trim(),
    category:pCat.value,
    price:parseFloat(pPrice.value),
    desc:pDesc.value.trim()
  };
  if(!p.name||!p.category||isNaN(p.price))return;
  prods.push(p);
  localStorage.setItem('products',JSON.stringify(prods));
  renderProds();
}
function renderProds(){
  prodsDiv.innerHTML='';
  prods.forEach((p,i)=>{
    prodsDiv.innerHTML+=`
    <div class="item">
      <div><b>${p.name}</b> (${p.category}) ‚Ç¨${p.price}</div>
      <button class="red" onclick="delProd(${i})">X</button>
    </div>`;
  });
}

/* GIFTCARD */
let gifts=JSON.parse(localStorage.getItem('giftCards'))||[];
function addGift(){
  const v=parseFloat(gVal.value);
  if(isNaN(v))return;
  gifts.push({name:'GIFT-'+Math.random().toString(36).substr(2,6).toUpperCase(),value:v,used:false});
  localStorage.setItem('giftCards',JSON.stringify(gifts));
  renderGifts();
}
function renderGifts(){
  giftsDiv.innerHTML='';
  gifts.forEach((g,i)=>{
    giftsDiv.innerHTML+=`
    <div class="item">
      ${g.name} - ‚Ç¨${g.value} ${g.used?'(usata)':''}
      <button class="red" onclick="delGift(${i})">X</button>
    </div>`;
  });
}
function delGift(i){
  gifts.splice(i,1);
  localStorage.setItem('giftCards',JSON.stringify(gifts));
  renderGifts();
}

/* INIT */
const catsDiv=document.getElementById('cats');
const prodsDiv=document.getElementById('prods');
const giftsDiv=document.getElementById('gifts');

function renderAll(){
  renderOrders();
  renderCats();
  renderProds();
  renderGifts();
  pCat.innerHTML='';
  cats.forEach(c=>pCat.innerHTML+=`<option>${c}</option>`);
}
</script>

</body>
</html>
