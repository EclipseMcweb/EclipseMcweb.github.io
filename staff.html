<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>MediaMC ‚Äì Pannello Staff</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:'Segoe UI',Arial;
  background:linear-gradient(135deg,#020617,#0f172a);
  color:#fff;
}
header{
  text-align:center;
  padding:40px;
  background:#020617;
  border-bottom:3px solid #facc15;
}
section{
  max-width:800px;
  margin:30px auto;
  background:#020617dd;
  border:2px solid #facc15;
  border-radius:14px;
  padding:20px;
}
h2{color:#facc15;margin-top:0}
input,button{
  padding:8px;
  border-radius:6px;
  border:none;
  margin:5px 0;
}
button{
  background:#facc15;
  color:#000;
  font-weight:bold;
  cursor:pointer;
}
.card{
  border-bottom:1px solid #facc15;
  padding:10px 0;
}
.hidden{display:none}
</style>
</head>

<body>

<header>
  <h1>üõ†Ô∏è MediaMC ‚Äì Staff Panel</h1>
  <p>Gestione Store & Gift Card</p>
</header>

<!-- LOGIN STAFF -->
<section id="login">
  <h2>Accesso Staff</h2>
  <input type="password" id="staffPass" placeholder="Password Staff">
  <button id="loginBtn">Accedi</button>
</section>

<!-- PANNELLO -->
<section id="panel" class="hidden">

  <!-- ORDINI -->
  <h2>üì¶ Ordini</h2>
  <input id="searchOrder" placeholder="Cerca ID Ordine">
  <button onclick="searchOrder()">Cerca</button>
  <div id="ordersList"></div>

  <hr>

  <!-- CREA GIFT CARD -->
  <h2>üéÅ Crea Gift Card</h2>
  <input id="giftCode" placeholder="Codice (es. MEDIAMC30)">
  <input id="giftValue" type="number" placeholder="Valore ‚Ç¨">
  <button onclick="createGift()">Crea Gift Card</button>
  <p id="giftMsg"></p>

  <hr>

  <!-- LISTA GIFT CARD -->
  <h2>üìã Gift Card Create</h2>
  <div id="giftList"></div>

</section>

<script>
const STAFF_PASSWORD = "staff123";

let orders = JSON.parse(localStorage.getItem("orders")) || [];
let giftCards = JSON.parse(localStorage.getItem("giftCards")) || {};

// LOGIN STAFF CORRETTO
document.getElementById("loginBtn").addEventListener("click", function() {
  const pass = document.getElementById("staffPass").value;
  if(pass !== STAFF_PASSWORD){
    alert("Password errata");
    return;
  }
  document.getElementById("login").style.display = "none";
  document.getElementById("panel").classList.remove("hidden");
  renderGifts();
});

// ORDINI
function searchOrder(){
  const id = document.getElementById("searchOrder").value.trim();
  const ordersList = document.getElementById("ordersList");
  ordersList.innerHTML="";
  const o = orders.find(x=>x.id===id);

  if(!o){
    ordersList.innerHTML="<p>Ordine non trovato</p>";
    return;
  }

  ordersList.innerHTML=`
    <div class="card">
      <b>Nick:</b> ${o.nick}<br>
      <b>ID:</b> ${o.id}<br>
      <b>Prodotti:</b> ${o.items.map(i=>i.n||i.name).join(", ")}<br>
      <b>Totale:</b> ‚Ç¨${o.total}
    </div>
  `;
}

// GIFT CARD
function createGift(){
  const code = document.getElementById("giftCode").value.trim().toUpperCase();
  const value = Number(document.getElementById("giftValue").value);
  const giftMsg = document.getElementById("giftMsg");

  if(!code || value<=0){
    giftMsg.textContent="Dati non validi";
    return;
  }

  giftCards[code]={value:value,used:false};
  localStorage.setItem("giftCards",JSON.stringify(giftCards));

  giftMsg.textContent=`Gift Card ${code} creata (‚Ç¨${value})`;
  document.getElementById("giftCode").value="";
  document.getElementById("giftValue").value="";
  renderGifts();
}

function renderGifts(){
  const giftList = document.getElementById("giftList");
  giftList.innerHTML="";
  Object.keys(giftCards).forEach(code=>{
    giftList.innerHTML+=`
      <div class="card">
        ${code} ‚Äì ‚Ç¨${giftCards[code].value} ‚Äì 
        ${giftCards[code].used ? "‚ùå Usata" : "‚úÖ Disponibile"}
      </div>
    `;
  });
}
</script>

</body>
</html>
