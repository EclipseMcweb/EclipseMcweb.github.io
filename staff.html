<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>MediaMC Staff Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:'Segoe UI',Arial,sans-serif;background:linear-gradient(135deg,#0ea5e9,#1e3a8a);color:#fff}
header{text-align:center;padding:40px;background:rgba(2,6,23,.9)}
section{max-width:900px;margin:30px auto;background:rgba(30,64,175,0.85);padding:20px;border-radius:12px;border:2px solid #38bdf8}
button{background:#22c55e;border:none;padding:8px 12px;border-radius:6px;color:#fff;font-weight:bold;cursor:pointer;margin:5px;transition:0.2s}
button.red{background:#ef4444}
input,select{padding:8px;border-radius:6px;border:none;width:90%;margin-bottom:10px}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center}
.modalBox{background:#020617;padding:20px;border-radius:12px;border:2px solid #38bdf8;text-align:center;width:300px}
.hidden{display:none}
.item{display:flex;justify-content:space-between;background:rgba(2,6,23,.8);padding:8px;border-radius:6px;margin:5px 0;align-items:center}
</style>
</head>
<body>

<header><h1>‚öôÔ∏è Pannello Staff MediaMC</h1></header>

<!-- GiftCards -->
<section>
<h2>üéÅ Gestione GiftCard</h2>
<button onclick="openGiftModal()">Crea GiftCard</button>
<div class="giftList" id="giftList"></div>
</section>

<!-- Ordini -->
<section>
<h2>üîç Cerca Ordini per ID</h2>
<input id="searchOrder" placeholder="Inserisci ID ordine">
<button onclick="searchOrder()">Cerca</button>
<div id="orderResult"></div>
</section>

<!-- Categorie -->
<section>
<h2>üìÇ Categorie</h2>
<input id="catName" placeholder="Nome categoria">
<button onclick="addCategory()">Aggiungi Categoria</button>
<div class="categoryList" id="categoryList"></div>
</section>

<!-- Prodotti -->
<section>
<h2>üß© Prodotti</h2>
<button onclick="openProdModal()">Crea Prodotto</button>
<div class="productList" id="productList"></div>
</section>

<!-- Modal Gift -->
<div id="giftModal" class="modal hidden">
  <div class="modalBox">
    <h3>Crea GiftCard</h3>
    <input id="giftName" placeholder="Nome gift">
    <input id="giftValue" placeholder="Valore (‚Ç¨)" type="number">
    <br>
    <button onclick="createGift()">Crea</button>
    <button onclick="closeGiftModal()">Chiudi</button>
  </div>
</div>

<!-- Modal Prodotto -->
<div id="prodModal" class="modal hidden">
  <div class="modalBox">
    <h3>Crea Prodotto</h3>
    <input id="prodTitle" placeholder="Titolo">
    <select id="prodCat"></select>
    <input id="prodPrice" placeholder="Prezzo (‚Ç¨)" type="number">
    <input id="prodDesc" placeholder="Descrizione">
    <input id="prodImg" placeholder="URL Immagine">
    <br>
    <button onclick="createProd()">Crea</button>
    <button onclick="closeProdModal()">Chiudi</button>
  </div>
</div>

<script>
// Dati
let giftCards=JSON.parse(localStorage.getItem('giftCards'))||[];
let categories=JSON.parse(localStorage.getItem('categories'))||[];
let products=JSON.parse(localStorage.getItem('products'))||[];

// Render gift cards
function renderGifts(){
  const list=document.getElementById('giftList');
  list.innerHTML='';
  giftCards.forEach((g,idx)=>{
    list.innerHTML+=`<div class="item">${g.name} - ‚Ç¨${g.value} <button class="red" onclick="removeGift(${idx})">X</button></div>`;
  });
}
renderGifts();

function openGiftModal(){document.getElementById('giftModal').classList.remove('hidden')}
function closeGiftModal(){document.getElementById('giftModal').classList.add('hidden')}
function createGift(){
  const n=document.getElementById('giftName').value.trim();
  const v=parseFloat(document.getElementById('giftValue').value);
  if(!n||isNaN(v)) return alert('Compila tutti i campi');
  giftCards.push({name:n,value:v,used:false,code:'GC-'+Math.floor(Math.random()*100000)});
  localStorage.setItem('giftCards',JSON.stringify(giftCards));
  renderGifts(); closeGiftModal();
}
function removeGift(idx){giftCards.splice(idx,1);localStorage.setItem('giftCards',JSON.stringify(giftCards));renderGifts()}

// Ordini
function searchOrder(){
  const id=document.getElementById('searchOrder').value.trim();
  const data=JSON.parse(localStorage.getItem('checkoutData'))||{};
  const res=document.getElementById('orderResult');
  if(data.id===id){
    res.innerHTML=`<p>Nick: ${data.nick}</p><p>Totale: ‚Ç¨${data.total}</p><p>Prodotti: ${data.cart.map(p=>p.name).join(', ')}</p>`;
  } else res.textContent='Ordine non trovato';
}

// Categorie
function renderCategories(){
  const list=document.getElementById('categoryList');
  const select=document.getElementById('prodCat');
  list.innerHTML=''; select.innerHTML='<option value="">Seleziona categoria</option>';
  categories.forEach((c,idx)=>{
    list.innerHTML+=`<div class="item">${c} <button class="red" onclick="removeCategory(${idx})">X</button></div>`;
    select.innerHTML+=`<option value="${c}">${c}</option>`;
  });
}
renderCategories();
function addCategory(){
  const val=document.getElementById('catName').value.trim();
  if(!val) return alert('Inserisci nome categoria');
  categories.push(val);
  localStorage.setItem('categories',JSON.stringify(categories));
  document.getElementById('catName').value='';
  renderCategories();
}
function removeCategory(idx){
  const cat=categories[idx];
  categories.splice(idx,1);
  products=products.filter(p=>p.category!==cat);
  localStorage.setItem('categories',JSON.stringify(categories));
  localStorage.setItem('products',JSON.stringify(products));
  renderCategories(); renderProducts();
}

// Prodotti
function renderProducts(){
  const list=document.getElementById('productList');
  list.innerHTML='';
  products.forEach((p,idx)=>{
    list.innerHTML+=`<div class="item">${p.name} (${p.category}) ‚Ç¨${p.price} <button class="red" onclick="removeProduct(${idx})">X</button></div>`;
  });
}
renderProducts();
function openProdModal(){document.getElementById('prodModal').classList.remove('hidden')}
function closeProdModal(){document.getElementById('prodModal').classList.add('hidden')}
function createProd(){
  const name=document.getElementById('prodTitle').value.trim();
  const cat=document.getElementById('prodCat').value;
  const price=parseFloat(document.getElementById('prodPrice').value);
  const desc=document.getElementById('prodDesc').value.trim();
  const img=document.getElementById('prodImg').value.trim();
  if(!name||!cat||isNaN(price)) return alert('Compila tutti i campi');
  products.push({name,category:cat,price,desc,img});
  localStorage.setItem('products',JSON.stringify(products));
  document.getElementById('prodTitle').value='';
  document.getElementById('prodPrice').value='';
  document.getElementById('prodDesc').value='';
  document.getElementById('prodImg').value='';
  closeProdModal(); renderProducts();
}
function removeProduct(idx){products.splice(idx,1);localStorage.setItem('products',JSON.stringify(products));renderProducts()}
</script>

</body>
</html>
