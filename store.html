<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>MediaMC Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:'Segoe UI',Arial;
  background:radial-gradient(circle at top,#1e3a8a,#020617 70%);
  color:#fff;
}

/* HEADER */
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:15px 25px;
  background:linear-gradient(90deg,#020617,#0f172a);
  border-bottom:2px solid #38bdf8;
}

.brand{
  font-size:1.4em;
  font-weight:bold;
  color:#38bdf8;
}

.userBox{
  display:flex;
  align-items:center;
  gap:12px;
}

.userBadge{
  background:#020617;
  border:1px solid #38bdf8;
  padding:6px 10px;
  border-radius:8px;
  color:#bae6fd;
}

.logout{
  background:#0f172a;
  border:1px solid #38bdf8;
  color:#38bdf8;
  padding:6px 10px;
  border-radius:8px;
  cursor:pointer;
}

.cartBtn{
  position:relative;
  background:#38bdf8;
  color:#020617;
  border:none;
  padding:8px 12px;
  border-radius:8px;
  cursor:pointer;
}

/* LAYOUT */
.container{
  max-width:1200px;
  margin:auto;
  padding:30px;
}

.section{
  background:rgba(2,6,23,.85);
  border:1px solid #38bdf8;
  border-radius:14px;
  padding:20px;
  margin-bottom:25px;
}

.section h2{
  margin-top:0;
  color:#38bdf8;
}

/* CATEGORIE */
.categories{
  display:flex;
  gap:15px;
  flex-wrap:wrap;
}

.category{
  background:linear-gradient(180deg,#0f172a,#020617);
  border:1px solid #38bdf8;
  padding:14px 22px;
  border-radius:10px;
  cursor:pointer;
  transition:.25s;
}

.category:hover,
.category.active{
  background:#38bdf8;
  color:#020617;
}

/* PRODOTTI */
.products{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:20px;
}

.product{
  background:linear-gradient(180deg,#020617,#020617);
  border:1px solid #334155;
  border-radius:12px;
  padding:12px;
  text-align:center;
  cursor:pointer;
  transition:.25s;
}

.product:hover{
  border-color:#38bdf8;
  transform:translateY(-3px);
}

.product img{
  max-width:100%;
  border-radius:8px;
  margin-bottom:8px;
}

.product b{
  display:block;
  margin-bottom:5px;
}

.price{
  color:#38bdf8;
  font-weight:bold;
}

/* MODAL */
.modalBg{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.75);
  justify-content:center;
  align-items:center;
  z-index:999;
}

.modal{
  background:#020617;
  border:2px solid #38bdf8;
  border-radius:14px;
  padding:25px;
  max-width:420px;
  width:90%;
}

.modal h3{margin-top:0;color:#38bdf8}
.modal button{
  margin-top:15px;
  background:#38bdf8;
  color:#020617;
  border:none;
  padding:10px 14px;
  border-radius:8px;
  cursor:pointer;
}

/* FOOTER */
footer{
  text-align:center;
  padding:30px;
  color:#94a3b8;
}
</style>
</head>
<body>

<header>
  <div class="brand">MediaMC Store</div>

  <div class="userBox">
    <div class="userBadge" id="nickLabel"></div>
    <button class="logout" onclick="logout()">Logout</button>
    <button class="cartBtn" onclick="location.href='cart.html'">üõí</button>
  </div>
</header>

<div class="container">

  <div class="section">
    <h2>Categorie</h2>
    <div class="categories" id="catList"></div>
  </div>

  <div class="section">
    <h2>Prodotti</h2>
    <div class="products" id="prodList">
      <p style="opacity:.6">Seleziona una categoria</p>
    </div>
  </div>

</div>

<footer>
  <button onclick="location.href='staff.html'">‚öôÔ∏è Apri pannello staff</button>
</footer>

<!-- MODAL NICK -->
<div class="modalBg" id="nickModal">
  <div class="modal">
    <h3>Inserisci il tuo nick Minecraft</h3>
    <input id="nickInput" style="width:100%;padding:10px;border-radius:8px;border:none">
    <button onclick="saveNick()">Entra nello store</button>
  </div>
</div>

<!-- MODAL PRODOTTO -->
<div class="modalBg" id="prodModal">
  <div class="modal">
    <h3 id="mTitle"></h3>
    <p id="mDesc"></p>
    <p class="price" id="mPrice"></p>
    <button onclick="addToCart()">Aggiungi al carrello</button>
  </div>
</div>

<script>
let nick=sessionStorage.getItem('nick');
let selectedProduct=null;

// Nick
if(!nick){
  document.getElementById('nickModal').style.display='flex';
}else{
  document.getElementById('nickLabel').textContent='Player: '+nick;
  loadStore();
}

function saveNick(){
  const n=document.getElementById('nickInput').value.trim();
  if(!n) return alert('Inserisci il nick');
  sessionStorage.setItem('nick',n);
  location.reload();
}

function logout(){
  sessionStorage.removeItem('nick');
  location.reload();
}

// Store
function loadStore(){
  const cats=JSON.parse(localStorage.getItem('categories'))||[];
  const catDiv=document.getElementById('catList');
  catDiv.innerHTML='';
  cats.forEach(c=>{
    const d=document.createElement('div');
    d.className='category';
    d.textContent=c;
    d.onclick=()=>selectCat(c,d);
    catDiv.appendChild(d);
  });
}

function selectCat(cat,el){
  document.querySelectorAll('.category').forEach(x=>x.classList.remove('active'));
  el.classList.add('active');

  const prods=JSON.parse(localStorage.getItem('products'))||[];
  const list=document.getElementById('prodList');
  list.innerHTML='';

  prods.filter(p=>p.category===cat).forEach(p=>{
    const d=document.createElement('div');
    d.className='product';
    d.innerHTML=`
      ${p.img?`<img src="${p.img}">`:''}
      <b>${p.name}</b>
      <div class="price">‚Ç¨${p.price}</div>
    `;
    d.onclick=()=>openProduct(p);
    list.appendChild(d);
  });
}

// Prodotto
function openProduct(p){
  selectedProduct=p;
  document.getElementById('mTitle').textContent=p.name;
  document.getElementById('mDesc').textContent=p.desc||'';
  document.getElementById('mPrice').textContent='Prezzo: ‚Ç¨'+p.price;
  document.getElementById('prodModal').style.display='flex';
}

document.getElementById('prodModal').onclick=e=>{
  if(e.target.id==='prodModal') e.target.style.display='none';
};

function addToCart(){
  let cart=JSON.parse(localStorage.getItem('cart_'+nick))||[];
  cart.push(selectedProduct);
  localStorage.setItem('cart_'+nick,JSON.stringify(cart));
  alert('Aggiunto al carrello!');
  document.getElementById('prodModal').style.display='none';
}
</script>

</body>
</html>
