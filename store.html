<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>MediaMC Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:'Segoe UI',Arial,sans-serif;background:linear-gradient(135deg,#0ea5e9,#1e3a8a);color:#fff;}
header{text-align:center;padding:50px 20px;background:rgba(2,6,23,0.9);box-shadow:0 4px 15px rgba(0,0,0,0.4);}
h1{color:#fff;}
.container{display:flex;gap:20px;max-width:1200px;margin:30px auto;}
.shop{flex:3;display:flex;flex-wrap:wrap;gap:20px;}
.productCard{background:rgba(2,6,23,0.85);padding:15px;border-radius:12px;width:calc(33% - 20px);box-shadow:0 0 15px #38bdf8aa;transition:.2s;}
.productCard:hover{transform:scale(1.02);}
.productCard img{width:100%;border-radius:8px;cursor:pointer;object-fit:cover;height:150px;}
button{background:#38bdf8;border:none;border-radius:8px;padding:6px 10px;color:#fff;font-weight:bold;cursor:pointer;margin-top:5px;transition:.2s;}
button:hover{transform:scale(1.05);}
.cart{flex:1;background:rgba(2,6,23,0.9);padding:15px;border-radius:12px;position:sticky;top:20px;max-height:600px;overflow-y:auto;}
.cart h3{text-align:center;color:#38bdf8;}
.cartItem{display:flex;justify-content:space-between;margin-bottom:10px;background:rgba(30,64,175,0.8);padding:8px;border-radius:6px;}
#total{margin-top:10px;font-weight:bold;text-align:right;color:#fff;}
#notification{position:fixed;top:20px;right:20px;background:#22c55e;padding:10px 15px;border-radius:8px;display:none;z-index:1000;}
/* MODAL IMMAGINE */
.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background:rgba(0,0,0,0.7);}
.modal-content{background:#1e40af;margin:10% auto;padding:20px;border-radius:15px;width:90%;max-width:500px;position:relative;}
.close{position:absolute;top:10px;right:15px;color:#fff;font-size:22px;font-weight:bold;cursor:pointer;}
.modal-content img{width:100%;border-radius:8px;}
</style>
</head>
<body>

<header>
<h1>ðŸ›’ MediaMC Store</h1>
<p>Acquista kit e prodotti per il tuo server!</p>
</header>

<div class="container">
  <div class="shop" id="shop"></div>
  <div class="cart">
    <h3>Carrello</h3>
    <div id="cartItems"></div>
    <div id="total">Totale: â‚¬0</div>
  </div>
</div>

<div id="notification">Aggiunto al carrello con successo.</div>

<!-- MODAL IMMAGINE -->
<div id="imageModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeImageModal()">&times;</span>
    <img id="largeImage" src="">
  </div>
</div>

<script>
let cart=[];
let categories=JSON.parse(localStorage.getItem('categories'))||[];
let products=JSON.parse(localStorage.getItem('products'))||[];

// MOSTRA PRODOTTI DINAMICI
function renderShop(){
  const shop=document.getElementById('shop');
  shop.innerHTML='';
  if(products.length===0) return shop.textContent='Nessun prodotto disponibile';
  products.forEach(p=>{
    const div=document.createElement('div');
    div.className='productCard';
    div.innerHTML=`
      <img src="${p.img}" onclick="openImageModal('${p.img}')">
      <h4>${p.title}</h4>
      <p>${p.desc}</p>
      <p>Categoria: ${p.category}</p>
      <p>â‚¬${p.price}</p>
      <button onclick="addToCart(${products.indexOf(p)})">Aggiungi al carrello</button>
    `;
    shop.appendChild(div);
  });
}

// CARRELLO
function addToCart(idx){
  cart.push(products[idx]);
  renderCart();
  showNotification();
}
function renderCart(){
  const cartDiv=document.getElementById('cartItems');
  const totalDiv=document.getElementById('total');
  cartDiv.innerHTML='';
  let total=0;
  cart.forEach((p,i)=>{
    total+=p.price;
    const div=document.createElement('div');
    div.className='cartItem';
    div.innerHTML=`<div>${p.title} (â‚¬${p.price})</div>
                   <button onclick="removeFromCart(${i})">X</button>`;
    cartDiv.appendChild(div);
  });
  totalDiv.textContent='Totale: â‚¬'+total;
}
function removeFromCart(i){
  cart.splice(i,1);
  renderCart();
}

// NOTIFICA
function showNotification(){
  const n=document.getElementById('notification');
  n.style.display='block';
  setTimeout(()=>{n.style.display='none'},1500);
}

// MODAL IMMAGINE
function openImageModal(src){
  document.getElementById('largeImage').src=src;
  document.getElementById('imageModal').style.display='block';
}
function closeImageModal(){
  document.getElementById('imageModal').style.display='none';
}

// INIT
renderShop();
</script>

</body>
</html>
